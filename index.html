<!DOCTYPE html>
<html>
<head>
  <title>Water Level Monitor</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js"></script>
  <style>
    body { font-family: Arial, sans-serif; }
    .sensor { margin: 5px; padding: 10px; display: inline-block; border-radius: 8px; width: 60px; text-align: center; }
    .on  { background-color: #4CAF50; color: white; }
    .off { background-color: #f44336; color: white; }
  </style>
</head>
<body>
  <h2>ðŸ’§ Water Level Monitoring</h2>
  <p>Water Level: <span id="level">--</span></p>
  <p>Motor: <span id="motor">--</span></p>
  <p>Dry Run: <span id="dryrun">--</span></p>

  <h3>Sensor Levels</h3>
  <div id="s20" class="sensor off">20%</div>
  <div id="s40" class="sensor off">40%</div>
  <div id="s60" class="sensor off">60%</div>
  <div id="s80" class="sensor off">80%</div>
  <div id="s100" class="sensor off">100%</div>

  <h3>Motor Control</h3>
  <button onclick="setMotor(1)">Motor ON</button>
  <button onclick="setMotor(0)">Motor OFF</button>

  <script>
    // Firebase config (replace with your values)
    const firebaseConfig = {
     apiKey: "AIzaSyA1ARR3AbTpPXZ5YD4yY9RvgDAFtux5OzY",
  authDomain: "water-level-3c52a.firebaseapp.com",
  databaseURL: "https://water-level-3c52a-default-rtdb.firebaseio.com",
  projectId: "water-level-3c52a",
  storageBucket: "water-level-3c52a.firebasestorage.app",
  messagingSenderId: "975946187055",
  appId: "1:975946187055:web:e3914a13661bfc08cc21da",
  measurementId: "G-PXKHH32NY0"
    };

    // Init Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Water level %
    db.ref("/water/percent").on("value", snap => {
      document.getElementById("level").innerText = snap.val() + " %";
    });

    // Motor ON/OFF
    db.ref("/motor/state").on("value", snap => {
      if (snap.exists()) {
        document.getElementById("motor").innerText = snap.val() == 1 ? "ON" : "OFF";
      }
    });

    // Dry run status
    db.ref("/dryRun").on("value", snap => {
      if (snap.exists()) {
        document.getElementById("dryrun").innerText = snap.val();  // "DRY" or "OK"
      }
    });

    // Sensor levels
    ["20","40","60","80","100"].forEach(level => {
      db.ref("/sensors/" + level).on("value", snap => {
        let el = document.getElementById("s" + level);
        if (snap.exists() && snap.val() === "ON") {
          el.className = "sensor on";
        } else {
          el.className = "sensor off";
        }
      });
    });

    // Motor control
    function setMotor(state) {
      db.ref("/control/manual").set(true);
      db.ref("/control/motor_set").set(state);
    }
  </script>
</body>
</html>
